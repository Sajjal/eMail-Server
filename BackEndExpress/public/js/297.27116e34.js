"use strict";(self["webpackChunkemail_server"]=self["webpackChunkemail_server"]||[]).push([[297],{482:(a,e,t)=>{t.d(e,{Z:()=>i});var s=t(1959),u=t(52),l=t.n(u),n=t(9582),o=t(4584);const d=()=>{const a=(0,s.iH)(""),e=(0,s.iH)(null),t="/",u=(0,n.tv)(),d=async(a,s)=>{try{const u=await l().post(`${t}${a}`,s);o["default"].dispatch("updateEmails",{emails:u.data.data,count:u.data.count}),e.value=null,u.data||(e.value="No Data Available!")}catch(n){"401"!=n.response.status&&"429"!=n.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"})),e.value="No Data Available!"}},i=async a=>{try{await l().post(`${t}toTrash`,a),u.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},r=async a=>{try{await l().post(`${t}addStar`,a),u.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},p=async a=>{try{await l().post(`${t}removeStar`,a),u.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},c=async a=>{try{await l().post(`${t}markAsRead`,a),u.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},m=async a=>{try{await l().post(`${t}block`,a)}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},g=async a=>{try{await l().post(`${t}unblock`,a)}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},h=async a=>{try{const s=await l().post(`${t}search`,a);e.value=null,o["default"].dispatch("updateCurrentMessage",s.data.data[0]),s.data||(e.value="No Data Available!")}catch(s){"401"!=s.response.status&&"429"!=s.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"})),e.value="No Data Available!"}},v=async a=>{try{await l().post(`${t}sent`,a),o["default"].dispatch("updateCurrentPage","Sent"),u.push({name:"Index"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"}))}},f=async e=>{try{await l().post(`${t}login`,e);a.value="",o["default"].dispatch("updateLoginStatus",!0),o["default"].dispatch("updateCurrentPage","Inbox"),o["default"].dispatch("updateSkipLimit",{skip:0,limit:10}),o["default"].dispatch("updateCurrentMessage",{}),o["default"].dispatch("updateEditMode","Compose"),o["default"].dispatch("openCloseSidebar",!1),u.push({name:"Index"})}catch(s){a.value=s.response.data.Error}},b=async()=>{try{await l().post(`${t}logout`,{});o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"})}catch(a){o["default"].dispatch("updateLoginStatus",!1),u.push({name:"Login"})}};return{error:e,loginError:a,load:d,fullEmail:h,addStar:r,removeStar:p,markAsRead:c,block:m,unblock:g,toTrash:i,sendMail:v,login:f,logout:b}},i=d},2297:(a,e,t)=>{t.r(e),t.d(e,{default:()=>M});var s=t(3673),u=t(1959),l=t(2323),n=t(9582),o=t(8825),d=t(3617),i=t(3750),r=t.n(i),p=t(482);const c={class:"q-mt-sm sd-center text-bold text-purple",style:{"font-size":"20px"}},m=(0,s.Uk)(" Send "),g=(0,s.Uk)(" Clear "),h={class:"sd-center q-mt-sm q-px-md"},v={class:"sd-center q-px-sm"},f={setup(a){(0,n.tv)();const e=(0,d.oR)(),t=(0,o.Z)(),i=(0,u.iH)(null),{sendMail:f}=(0,p.Z)(),b=!t.platform.is.mobile,w=(0,u.iH)(""),y=(0,u.iH)(""),L=(0,u.iH)(""),S=(0,u.iH)(""),k=(0,u.iH)("");function q(){y.value=L.value=S.value=k.value=w.value="",e.dispatch("updateEditMode","Compose")}async function x(){await f({from:y.value,to:L.value,subject:S.value,message:r().sanitize(k.value)})}function C(a){if("INPUT"===a.target.nodeName)return;let e,t;a.preventDefault(),a.stopPropagation(),a.originalEvent&&a.originalEvent.clipboardData.getData?(e=a.originalEvent.clipboardData.getData("text/plain"),i.value.runCmd("insertText",e)):a.clipboardData&&a.clipboardData.getData?(e=a.clipboardData.getData("text/plain"),i.value.runCmd("insertText",e)):window.clipboardData&&window.clipboardData.getData&&(t||(t=!0,i.value.runCmd("ms-pasteTextOnly",e)),t=!1)}return(0,s.bv)((()=>{"Reply"==e.state.editMode&&(y.value=e.state.currentMessage.to,L.value=e.state.currentMessage.from,S.value=`RE: ${e.state.currentMessage.subject}`,k.value=`\r\n\r\n\r\n\r\n<br/><br/><br/><br/><br/><br/>----------------------------------------------------------------<br/><br/>\r\n\r\n${r().sanitize(e.state.currentMessage.message)}`)})),(a,t)=>{const n=(0,s.up)("q-icon"),o=(0,s.up)("q-item-section"),d=(0,s.up)("q-tooltip"),r=(0,s.up)("q-btn"),p=(0,s.up)("q-item"),f=(0,s.up)("q-separator"),w=(0,s.up)("q-input"),D=(0,s.up)("q-editor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",c,[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"Compose"==(0,u.SU)(e).state.editMode?"edit":"reply",size:"md"},null,8,["name"])])),_:1}),(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)("Compose"==(0,u.SU)(e).state.editMode?"Compose":"Reply"),1)])),_:1}),(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{outline:"",round:"",color:"green",icon:"send",size:"md",onClick:x},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{class:"bg-green text-white"},{default:(0,s.w5)((()=>[m])),_:1})])),_:1})])),_:1}),(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{outline:"",round:"",color:"black",icon:"clear",size:"md",onClick:q},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[g])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(f,{class:"bg-grey-4 q-mt-md q-mx-md"})]),(0,s._)("div",h,[(0,s.Wm)(w,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),label:"From"},null,8,["modelValue"]),(0,s.Wm)(w,{modelValue:L.value,"onUpdate:modelValue":t[1]||(t[1]=a=>L.value=a),label:"To",class:"q-mt-sm"},null,8,["modelValue"]),(0,s.Wm)(w,{modelValue:S.value,"onUpdate:modelValue":t[2]||(t[2]=a=>S.value=a),label:"Subject",class:(0,l.C_)((0,u.SU)(b)?"q-mt-sm q-mb-lg":"q-mt-sm q-mb-sm")},null,8,["modelValue","class"]),(0,u.SU)(b)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(w,{key:0,borderless:"",modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=a=>k.value=a),type:"textarea",rows:"20",label:"Message"},null,8,["modelValue"]))]),(0,s._)("div",v,[(0,u.SU)(b)?((0,s.wg)(),(0,s.j4)(D,{key:0,modelValue:k.value,"onUpdate:modelValue":t[4]||(t[4]=a=>k.value=a),ref_key:"editorRef",ref:i,"min-height":"300px","max-height":"300px",flat:"",placeholder:"Message",onPaste:C},null,8,["modelValue"])):(0,s.kq)("",!0)])],64)}}};var b=t(3414),w=t(2035),y=t(4554),L=t(6819),S=t(8870),k=t(5869),q=t(1563),x=t(1945),C=t(7518),D=t.n(C);const _=f,M=_;D()(f,"components",{QItem:b.Z,QItemSection:w.Z,QIcon:y.Z,QBtn:L.Z,QTooltip:S.Z,QSeparator:k.Z,QInput:q.Z,QEditor:x.Z})}}]);