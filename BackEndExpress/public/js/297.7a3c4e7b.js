"use strict";(self["webpackChunkemail_server"]=self["webpackChunkemail_server"]||[]).push([[297],{482:(a,e,t)=>{t.d(e,{Z:()=>d});var s=t(1959),l=t(52),u=t.n(l),n=t(9582),o=t(4584);const r=()=>{const a=(0,s.iH)(""),e=(0,s.iH)(null),t="/",l=(0,n.tv)(),r=async(a,s)=>{try{const l=await u().post(`${t}${a}`,s);o["default"].dispatch("updateEmails",{emails:l.data.data,count:l.data.count}),e.value=null,l.data||(e.value="No Data Available!")}catch(n){"401"!=n.response.status&&"429"!=n.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),e.value="No Data Available!"}},d=async a=>{try{await u().post(`${t}toTrash`,a),l.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},i=async a=>{try{await u().post(`${t}addStar`,a),l.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},p=async a=>{try{await u().post(`${t}removeStar`,a),l.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},m=async a=>{try{await u().post(`${t}markAsRead`,a),l.push({name:"Login"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},c=async a=>{try{const s=await u().post(`${t}search`,a);e.value=null,o["default"].dispatch("updateCurrentMessage",s.data.data[0]),s.data||(e.value="No Data Available!")}catch(s){"401"!=s.response.status&&"429"!=s.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),e.value="No Data Available!"}},g=async a=>{try{await u().post(`${t}sent`,a),o["default"].dispatch("updateCurrentPage","Sent"),l.push({name:"Index"})}catch(e){"401"!=e.response.status&&"429"!=e.response.status||(o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},v=async e=>{try{await u().post(`${t}login`,e);a.value="",o["default"].dispatch("updateLoginStatus",!0),l.push({name:"Index"})}catch(s){a.value=s.response.data.Error}},h=async()=>{try{await u().post(`${t}logout`,{});o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}catch(a){o["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}};return{error:e,loginError:a,load:r,fullEmail:c,addStar:i,removeStar:p,markAsRead:m,toTrash:d,sendMail:g,login:v,logout:h}},d=r},2297:(a,e,t)=>{t.r(e),t.d(e,{default:()=>V});var s=t(3673),l=t(1959),u=t(2323),n=t(9582),o=t(8825),r=t(3617),d=t(3750),i=t.n(d),p=t(482);const m={class:"q-mt-sm sd-center text-bold text-purple",style:{"font-size":"20px"}},c=(0,s.Uk)(" Send "),g=(0,s.Uk)(" Clear "),v={class:"sd-center q-mt-sm q-px-md"},h={class:"sd-center q-px-sm"},f={setup(a){(0,n.tv)();const e=(0,r.oR)(),t=(0,o.Z)(),d=(0,l.iH)(null),{sendMail:f}=(0,p.Z)(),b=!t.platform.is.mobile,w=(0,l.iH)(""),y=(0,l.iH)(""),S=(0,l.iH)(""),L=(0,l.iH)(""),q=(0,l.iH)("");function x(){y.value=S.value=L.value=q.value=w.value="",e.dispatch("updateEditMode","Compose")}async function D(){await f({from:y.value,to:S.value,subject:L.value,message:i().sanitize(q.value)})}function k(a){if("INPUT"===a.target.nodeName)return;let e,t;a.preventDefault(),a.stopPropagation(),a.originalEvent&&a.originalEvent.clipboardData.getData?(e=a.originalEvent.clipboardData.getData("text/plain"),d.value.runCmd("insertText",e)):a.clipboardData&&a.clipboardData.getData?(e=a.clipboardData.getData("text/plain"),d.value.runCmd("insertText",e)):window.clipboardData&&window.clipboardData.getData&&(t||(t=!0,d.value.runCmd("ms-pasteTextOnly",e)),t=!1)}return(0,s.bv)((()=>{"Reply"==e.state.editMode&&(y.value=e.state.currentMessage.to,S.value=e.state.currentMessage.from,L.value=`RE: ${e.state.currentMessage.subject}`,q.value=`\r\n\r\n\r\n\r\n<br/><br/><br/><br/><br/><br/>----------------------------------------------------------------<br/><br/>\r\n\r\n${i().sanitize(e.state.currentMessage.message)}`)})),(a,t)=>{const n=(0,s.up)("q-icon"),o=(0,s.up)("q-item-section"),r=(0,s.up)("q-tooltip"),i=(0,s.up)("q-btn"),p=(0,s.up)("q-item"),f=(0,s.up)("q-separator"),w=(0,s.up)("q-input"),_=(0,s.up)("q-editor");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",m,[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"Compose"==(0,l.SU)(e).state.editMode?"edit":"reply",size:"md"},null,8,["name"])])),_:1}),(0,s.Wm)(o,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)("Compose"==(0,l.SU)(e).state.editMode?"Compose":"Reply"),1)])),_:1}),(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outline:"",round:"",color:"green",icon:"send",size:"md",onClick:D},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"bg-green text-white"},{default:(0,s.w5)((()=>[c])),_:1})])),_:1})])),_:1}),(0,s.Wm)(o,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{outline:"",round:"",color:"black",icon:"clear",size:"md",onClick:x},{default:(0,s.w5)((()=>[(0,s.Wm)(r,null,{default:(0,s.w5)((()=>[g])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(f,{class:"bg-grey-4 q-mt-md q-mx-md"})]),(0,s._)("div",v,[(0,s.Wm)(w,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),label:"From"},null,8,["modelValue"]),(0,s.Wm)(w,{modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=a=>S.value=a),label:"To",class:"q-mt-sm"},null,8,["modelValue"]),(0,s.Wm)(w,{modelValue:L.value,"onUpdate:modelValue":t[2]||(t[2]=a=>L.value=a),label:"Subject",class:(0,u.C_)((0,l.SU)(b)?"q-mt-sm q-mb-lg":"q-mt-sm q-mb-sm")},null,8,["modelValue","class"]),(0,l.SU)(b)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(w,{key:0,borderless:"",modelValue:q.value,"onUpdate:modelValue":t[3]||(t[3]=a=>q.value=a),type:"textarea",rows:"20",label:"Message"},null,8,["modelValue"]))]),(0,s._)("div",h,[(0,l.SU)(b)?((0,s.wg)(),(0,s.j4)(_,{key:0,modelValue:q.value,"onUpdate:modelValue":t[4]||(t[4]=a=>q.value=a),ref_key:"editorRef",ref:d,"min-height":"300px","max-height":"300px",flat:"",placeholder:"Message",onPaste:k},null,8,["modelValue"])):(0,s.kq)("",!0)])],64)}}};var b=t(3414),w=t(2035),y=t(4554),S=t(6819),L=t(8870),q=t(5869),x=t(1563),D=t(1945),k=t(7518),_=t.n(k);const C=f,V=C;_()(f,"components",{QItem:b.Z,QItemSection:w.Z,QIcon:y.Z,QBtn:S.Z,QTooltip:L.Z,QSeparator:q.Z,QInput:x.Z,QEditor:D.Z})}}]);