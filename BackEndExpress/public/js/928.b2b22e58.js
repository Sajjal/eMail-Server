"use strict";(self["webpackChunkemail_server"]=self["webpackChunkemail_server"]||[]).push([[928],{482:(a,t,e)=>{e.d(t,{Z:()=>d});var s=e(1959),l=e(52),i=e.n(l),u=e(9582),n=e(4584);const o=()=>{const a=(0,s.iH)(""),t=(0,s.iH)(null),e="/",l=(0,u.tv)(),o=async(a,s)=>{try{const l=await i().post(`${e}${a}`,s);n["default"].dispatch("updateEmails",{emails:l.data.data,count:l.data.count}),t.value=null,l.data||(t.value="No Data Available!")}catch(u){"401"!=u.response.status&&"429"!=u.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),t.value="No Data Available!"}},d=async a=>{try{await i().post(`${e}toTrash`,a),l.push({name:"Login"})}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},c=async a=>{try{await i().post(`${e}addStar`,a),l.push({name:"Login"})}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},p=async a=>{try{await i().post(`${e}removeStar`,a),l.push({name:"Login"})}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},r=async a=>{try{await i().post(`${e}markAsRead`,a),l.push({name:"Login"})}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},m=async a=>{try{await i().post(`${e}block`,a)}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},w=async a=>{try{await i().post(`${e}unblock`,a)}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},f=async a=>{try{const s=await i().post(`${e}search`,a);t.value=null,n["default"].dispatch("updateCurrentMessage",s.data.data[0]),s.data||(t.value="No Data Available!")}catch(s){"401"!=s.response.status&&"429"!=s.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),t.value="No Data Available!"}},k=async a=>{try{await i().post(`${e}sent`,a),n["default"].dispatch("updateCurrentPage","Sent"),l.push({name:"Index"})}catch(t){"401"!=t.response.status&&"429"!=t.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},h=async t=>{try{await i().post(`${e}login`,t);a.value="",n["default"].dispatch("updateLoginStatus",!0),n["default"].dispatch("updateCurrentPage","Inbox"),n["default"].dispatch("updateSkipLimit",{skip:0,limit:10}),n["default"].dispatch("updateCurrentMessage",{}),n["default"].dispatch("updateEditMode","Compose"),n["default"].dispatch("openCloseSidebar",!1),l.push({name:"Index"})}catch(s){a.value=s.response.data.Error}},g=async()=>{try{await i().post(`${e}logout`,{});n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}catch(a){n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}};return{error:t,loginError:a,load:o,fullEmail:f,addStar:c,removeStar:p,markAsRead:r,block:m,unblock:w,toTrash:d,sendMail:k,login:h,logout:g}},d=o},7928:(a,t,e)=>{e.r(t),e.d(t,{default:()=>N});e(5363);var s=e(3673),l=e(2323),i=e(1959),u=e(8880),n=e(8825),o=e(1082),d=e(3617),c=e(482);const p={class:"q-mt-sm sd-center text-bold text-purple",style:{"font-size":"20px"}},r=(0,s.Uk)(" Block Own Mailbox "),m=(0,s.Uk)(" Refresh "),w={class:"sd-center q-mt-md"},f={class:"text-subtitle2"},k={class:"text-grey-8 text-bold"},h={class:"text-weight-bold"},g={class:"text-grey-8 q-gutter-xs"},v=(0,s.Uk)(" Unblock "),y=(0,s.Uk)(" Enter the Mailbox You want to Block! "),_=(0,s.Uk)(" Are You Sure to Unblock? "),W=(0,s.Uk)(" You will not receive any email coming to this Mailbox! "),b={class:"text-bold"},S=(0,s.Uk)(" again! "),x={setup(a){const t=(0,d.oR)(),e=(0,n.Z)(),{load:x,block:L,unblock:U}=(0,c.Z)(),q=!e.platform.is.mobile,z=(0,i.iH)([]),C=(0,i.iH)(!1),Z=(0,i.iH)(!1),Q=(0,i.iH)("add"),$=(0,i.iH)(""),D=(0,i.iH)({email:"",id:""}),A=(0,i.iH)("");async function H(){C.value=!0,await x("emails",{directory:"BlockList",skip:t.state.skip,limit:t.state.limit}),z.value=t.state.emails,z.value&&z.value.length||(A.value=`${t.state.currentPage} is Empty!`),C.value=!1}async function M(){t.state.count<=t.state.skip+10||(t.dispatch("updateSkipLimit",{skip:t.state.skip+10,limit:t.state.limit}),await H())}async function Y(){t.state.skip<=0||(t.dispatch("updateSkipLimit",{skip:t.state.skip-10,limit:t.state.limit}),await H())}function j(a,t={}){"add"==a&&(Q.value="add"),"unblock"==a&&(Q.value="unblock"),D.value=t,Z.value=!0}function I(){Q.value="add",D.value={},Z.value=!1}async function E(){"unblock"==Q.value&&(await U(D.value),await H()),"add"==Q.value&&(await L({email:$.value,type:"own_mailbox"}),await H()),Q.value="add",D.value={},Z.value=!1}return(0,s.bv)((async()=>{t.dispatch("updateCurrentPage","Block List"),t.dispatch("updateSkipLimit",{skip:0,limit:10}),t.dispatch("openCloseSidebar",!1),await H()})),(a,e)=>{const n=(0,s.up)("q-icon"),d=(0,s.up)("q-item-section"),c=(0,s.up)("q-btn"),x=(0,s.up)("q-item"),L=(0,s.up)("q-tooltip"),U=(0,s.up)("q-spinner-pie"),P=(0,s.up)("q-separator"),B=(0,s.up)("q-item-label"),V=(0,s.up)("q-avatar"),N=(0,s.up)("q-scroll-area"),R=(0,s.up)("q-list"),K=(0,s.up)("q-card-section"),T=(0,s.up)("q-input"),O=(0,s.up)("q-card-actions"),F=(0,s.up)("q-card"),G=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",p,[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"block",size:"md"})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(t).state.currentPage),1)])),_:1}),(0,i.SU)(t).state.count?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"gt-sm",style:{"font-size":"14px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"chevron_left",size:"sm",onClick:Y})])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(t).state.skip+1)+"-"+(0,l.zw)((0,i.SU)(t).state.count<(0,i.SU)(t).state.skip+10?(0,i.SU)(t).state.count:(0,i.SU)(t).state.skip+10)+" of "+(0,l.zw)((0,i.SU)(t).state.count),1)])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"navigate_next",size:"sm",onClick:M})])),_:1})])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{outline:"",round:"",color:"purple",icon:"add",size:"md",onClick:e[0]||(e[0]=a=>j("add"))},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{class:"bg-purple text-white"},{default:(0,s.w5)((()=>[r])),_:1})])),_:1})])),_:1}),(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{outline:"",round:"",loading:C.value,color:"primary",icon:"sync",size:"md",onClick:H},{loading:(0,s.w5)((()=>[(0,s.Wm)(U)])),default:(0,s.w5)((()=>[(0,s.Wm)(L,{class:"bg-primary text-white"},{default:(0,s.w5)((()=>[m])),_:1})])),_:1},8,["loading"])])),_:1})])),_:1}),(0,s.Wm)(P,{class:"bg-grey-4 q-mx-md lt-md"}),(0,i.SU)(t).state.count?((0,s.wg)(),(0,s.j4)(x,{key:0,class:"lt-md",style:{"font-size":"14px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"chevron_left",size:"sm",onClick:Y})])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(t).state.skip+1)+"-"+(0,l.zw)((0,i.SU)(t).state.count<(0,i.SU)(t).state.skip+10?(0,i.SU)(t).state.count:(0,i.SU)(t).state.skip+10)+" of "+(0,l.zw)((0,i.SU)(t).state.count),1)])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"navigate_next",size:"sm",onClick:M})])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(P,{class:(0,l.C_)((0,i.SU)(q)?"bg-grey-4  q-mx-md":"bg-grey-4 q-mx-md")},null,8,["class"])]),(0,s._)("div",w,[(0,s.Wm)(R,{style:{"max-width":"1000px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{style:{height:"69vh"}},{default:(0,s.w5)((()=>[A.value?((0,s.wg)(),(0,s.j4)(x,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",f,(0,l.zw)(A.value),1)])),_:1})])),_:1})])),_:1})):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(z.value,(a=>((0,s.wg)(),(0,s.iD)("div",{key:a._id},[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{color:"other_sender"==a.type?"red-9":"primary","text-color":"white",icon:"other_sender"==a.type?"input":"inbox"},null,8,["color","icon"])])),_:2},1024),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",k,(0,l.zw)(a.email?a.email.split("<")[0].replace(/[^a-z0-9@,. ]/gi,""):""),1)])),_:2},1024),(0,s.Wm)(B,{caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(o.ZP).formatDate(a.date,"ddd, DD MMM YYYY,  hh:mm A"))+" -- ",1),(0,s._)("span",h,(0,l.zw)(a.email.includes("<")?a.email.split("<")[1].split(">")[0]:a.email),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(d,{top:"",side:""},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.Wm)(c,{size:"12px",flat:"",dense:"",round:"",class:"text-red-9",icon:"remove_circle_outline",onClick:t=>j("unblock",{email:a.email,id:a._id,type:a.type})},{default:(0,s.w5)((()=>[(0,s.Wm)(L,{class:"bg-red-9 text-white"},{default:(0,s.w5)((()=>[v])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),(0,s.Wm)(P,{spaced:""})])))),128))])),_:1})])),_:1})]),(0,s.Wm)(G,{modelValue:Z.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Z.value=a),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{style:{"min-width":"250px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(x,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{top:"",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{icon:"report",color:"red","text-color":"white"})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>["add"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:0},{default:(0,s.w5)((()=>[y])),_:1})):(0,s.kq)("",!0),"unblock"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:1},{default:(0,s.w5)((()=>[_])),_:1})):(0,s.kq)("",!0),"add"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:2,caption:"",lines:"3"},{default:(0,s.w5)((()=>[W])),_:1})):(0,s.kq)("",!0),"unblock"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:3,caption:"",lines:"3"},{default:(0,s.w5)((()=>[(0,s.Uk)(" You will start receiving emails "+(0,l.zw)("other_sender"==D.value.type?"from":"to")+" ",1),(0,s._)("span",b,(0,l.zw)(D.value.email),1),S])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(P,{spaced:"",inset:"item"})])),_:1}),"add"==Q.value?((0,s.wg)(),(0,s.j4)(K,{key:0,class:"q-pt-none q-mx-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{dense:"",modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=a=>$.value=a),autofocus:"",onKeyup:(0,u.D2)(E,["enter"])},null,8,["modelValue","onKeyup"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(O,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",label:"Cancel",color:"primary",onClick:I}),(0,s.Wm)(c,{flat:"",label:"add"==Q.value?"Block":"Unblock",color:"red",onClick:E},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var L=e(3414),U=e(2035),q=e(4554),z=e(6819),C=e(8870),Z=e(5314),Q=e(5869),$=e(7011),D=e(7704),A=e(2350),H=e(5096),M=e(6778),Y=e(151),j=e(5589),I=e(1563),E=e(9367),P=e(7518),B=e.n(P);const V=x,N=V;B()(x,"components",{QItem:L.Z,QItemSection:U.Z,QIcon:q.Z,QBtn:z.Z,QTooltip:C.Z,QSpinnerPie:Z.Z,QSeparator:Q.Z,QList:$.Z,QScrollArea:D.Z,QItemLabel:A.Z,QAvatar:H.Z,QDialog:M.Z,QCard:Y.Z,QCardSection:j.Z,QInput:I.Z,QCardActions:E.Z})}}]);