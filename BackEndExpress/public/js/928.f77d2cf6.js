"use strict";(self["webpackChunkemail_server"]=self["webpackChunkemail_server"]||[]).push([[928],{482:(t,a,e)=>{e.d(a,{Z:()=>d});e(71),e(7965),e(6016);var s=e(1959),l=e(52),i=e.n(l),u=e(9582),n=e(4584);const o=()=>{const t=(0,s.iH)(""),a=(0,s.iH)(null),e="/",l=(0,u.tv)(),o=async(t,s)=>{try{const l=await i().post(`${e}${t}`,s);n["default"].dispatch("updateEmails",{emails:l.data.data,count:l.data.count}),a.value=null,l.data||(a.value="No Data Available!")}catch(u){"401"!=u.response.status&&"429"!=u.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),a.value="No Data Available!"}},d=async t=>{try{const{data:a}=await i().post(`${e}download`,t,{responseType:"blob"}),s=document.createElement("a");return s.href=window.URL.createObjectURL(new Blob([a])),document.body.appendChild(s),s.download=t.name,s.click(),URL.revokeObjectURL(s.href)}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},c=async t=>{try{await i().post(`${e}toTrash`,t),l.push({name:"Login"})}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},p=async t=>{try{await i().post(`${e}addStar`,t),l.push({name:"Login"})}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},r=async t=>{try{await i().post(`${e}removeStar`,t),l.push({name:"Login"})}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},m=async t=>{try{await i().post(`${e}markAsRead`,t),l.push({name:"Login"})}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},w=async t=>{try{await i().post(`${e}block`,t)}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},f=async t=>{try{await i().post(`${e}unblock`,t)}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},h=async t=>{try{const s=await i().post(`${e}search`,t);a.value=null,n["default"].dispatch("updateCurrentMessage",s.data.data[0]),s.data||(a.value="No Data Available!")}catch(s){"401"!=s.response.status&&"429"!=s.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})),a.value="No Data Available!"}},k=async t=>{try{await i().post(`${e}sent`,t,{headers:{"Content-Type":"multipart/form-data"}}),n["default"].dispatch("updateCurrentPage","Sent"),l.push({name:"Index"})}catch(a){"401"!=a.response.status&&"429"!=a.response.status||(n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"}))}},g=async a=>{try{await i().post(`${e}login`,a);t.value="",n["default"].dispatch("updateLoginStatus",!0),n["default"].dispatch("updateCurrentPage","Inbox"),n["default"].dispatch("updateSkipLimit",{skip:0,limit:10}),n["default"].dispatch("updateCurrentMessage",{}),n["default"].dispatch("updateEditMode","Compose"),n["default"].dispatch("openCloseSidebar",!1),l.push({name:"Index"})}catch(s){t.value=s.response.data.Error}},v=async()=>{try{await i().post(`${e}logout`,{});n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}catch(t){n["default"].dispatch("updateLoginStatus",!1),l.push({name:"Login"})}};return{error:a,loginError:t,load:o,download:d,fullEmail:h,addStar:p,removeStar:r,markAsRead:m,block:w,unblock:f,toTrash:c,sendMail:k,login:g,logout:v}},d=o},7928:(t,a,e)=>{e.r(a),e.d(a,{default:()=>V});e(5363);var s=e(3673),l=e(2323),i=e(1959),u=e(8880),n=e(8825),o=e(1082),d=e(3617),c=e(482);const p={class:"q-mt-sm sd-center text-bold text-purple",style:{"font-size":"20px"}},r=(0,s.Uk)(" Block Own Mailbox "),m=(0,s.Uk)(" Refresh "),w={class:"sd-center q-mt-md"},f={class:"text-subtitle2"},h={class:"text-grey-8 text-bold"},k={class:"text-weight-bold"},g={class:"text-grey-8 q-gutter-xs"},v=(0,s.Uk)(" Unblock "),y=(0,s.Uk)(" Enter the Mailbox You want to Block! "),_=(0,s.Uk)(" Are You Sure to Unblock? "),b=(0,s.Uk)(" You will not receive any email coming to this Mailbox! "),W={class:"text-bold"},S=(0,s.Uk)(" again! "),L={setup(t){const a=(0,d.oR)(),e=(0,n.Z)(),{load:L,block:U,unblock:x}=(0,c.Z)(),q=!e.platform.is.mobile,C=(0,i.iH)([]),z=(0,i.iH)(!1),Z=(0,i.iH)(!1),Q=(0,i.iH)("add"),$=(0,i.iH)(""),D=(0,i.iH)({email:"",id:""}),A=(0,i.iH)("");async function H(){z.value=!0,await L("emails",{directory:"BlockList",skip:a.state.skip,limit:a.state.limit}),C.value=a.state.emails,C.value&&C.value.length||(A.value=`${a.state.currentPage} is Empty!`),z.value=!1}async function j(){a.state.count<=a.state.skip+10||(a.dispatch("updateSkipLimit",{skip:a.state.skip+10,limit:a.state.limit}),await H())}async function M(){a.state.skip<=0||(a.dispatch("updateSkipLimit",{skip:a.state.skip-10,limit:a.state.limit}),await H())}function Y(t,a={}){"add"==t&&(Q.value="add"),"unblock"==t&&(Q.value="unblock"),D.value=a,Z.value=!0}function E(){Q.value="add",D.value={},Z.value=!1}async function I(){"unblock"==Q.value&&(await x(D.value),await H()),"add"==Q.value&&(await U({email:$.value,type:"own_mailbox"}),await H()),Q.value="add",D.value={},Z.value=!1}return(0,s.bv)((async()=>{a.dispatch("updateCurrentPage","Block List"),a.dispatch("updateSkipLimit",{skip:0,limit:10}),a.dispatch("openCloseSidebar",!1),await H()})),(t,e)=>{const n=(0,s.up)("q-icon"),d=(0,s.up)("q-item-section"),c=(0,s.up)("q-btn"),L=(0,s.up)("q-item"),U=(0,s.up)("q-tooltip"),x=(0,s.up)("q-spinner-pie"),R=(0,s.up)("q-separator"),B=(0,s.up)("q-item-label"),P=(0,s.up)("q-avatar"),V=(0,s.up)("q-scroll-area"),T=(0,s.up)("q-list"),N=(0,s.up)("q-card-section"),K=(0,s.up)("q-input"),O=(0,s.up)("q-card-actions"),F=(0,s.up)("q-card"),G=(0,s.up)("q-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",p,[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{name:"block",size:"md"})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(a).state.currentPage),1)])),_:1}),(0,i.SU)(a).state.count?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"gt-sm",style:{"font-size":"14px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"chevron_left",size:"sm",onClick:M})])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(a).state.skip+1)+"-"+(0,l.zw)((0,i.SU)(a).state.count<(0,i.SU)(a).state.skip+10?(0,i.SU)(a).state.count:(0,i.SU)(a).state.skip+10)+" of "+(0,l.zw)((0,i.SU)(a).state.count),1)])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"navigate_next",size:"sm",onClick:j})])),_:1})])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{outline:"",round:"",color:"purple",icon:"add",size:"md",onClick:e[0]||(e[0]=t=>Y("add"))},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"bg-purple text-white"},{default:(0,s.w5)((()=>[r])),_:1})])),_:1})])),_:1}),(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{outline:"",round:"",loading:z.value,color:"primary",icon:"sync",size:"md",onClick:H},{loading:(0,s.w5)((()=>[(0,s.Wm)(x)])),default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"bg-primary text-white"},{default:(0,s.w5)((()=>[m])),_:1})])),_:1},8,["loading"])])),_:1})])),_:1}),(0,s.Wm)(R,{class:"bg-grey-4 q-mx-md lt-md"}),(0,i.SU)(a).state.count?((0,s.wg)(),(0,s.j4)(L,{key:0,class:"lt-md",style:{"font-size":"14px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"chevron_left",size:"sm",onClick:M})])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(a).state.skip+1)+"-"+(0,l.zw)((0,i.SU)(a).state.count<(0,i.SU)(a).state.skip+10?(0,i.SU)(a).state.count:(0,i.SU)(a).state.skip+10)+" of "+(0,l.zw)((0,i.SU)(a).state.count),1)])),_:1}),(0,s.Wm)(d,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",round:"",color:"primary",icon:"navigate_next",size:"sm",onClick:j})])),_:1})])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(R,{class:(0,l.C_)((0,i.SU)(q)?"bg-grey-4  q-mx-md":"bg-grey-4 q-mx-md")},null,8,["class"])]),(0,s._)("div",w,[(0,s.Wm)(T,{style:{"max-width":"1000px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(V,{style:{height:"69vh"}},{default:(0,s.w5)((()=>[A.value?((0,s.wg)(),(0,s.j4)(L,{key:0},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",f,(0,l.zw)(A.value),1)])),_:1})])),_:1})])),_:1})):((0,s.wg)(!0),(0,s.iD)(s.HY,{key:1},(0,s.Ko)(C.value,(t=>((0,s.wg)(),(0,s.iD)("div",{key:t._id},[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{color:"other_sender"==t.type?"red-9":"primary","text-color":"white",icon:"other_sender"==t.type?"input":"inbox"},null,8,["color","icon"])])),_:2},1024),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(B,{lines:"1"},{default:(0,s.w5)((()=>[(0,s._)("span",h,(0,l.zw)(t.email?t.email.split("<")[0].replace(/[^a-z0-9@,. ]/gi,""):""),1)])),_:2},1024),(0,s.Wm)(B,{caption:"",lines:"2"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)((0,i.SU)(o.ZP).formatDate(t.date,"ddd, DD MMM YYYY,  hh:mm A"))+" -- ",1),(0,s._)("span",k,(0,l.zw)(t.email.includes("<")?t.email.split("<")[1].split(">")[0]:t.email),1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(d,{top:"",side:""},{default:(0,s.w5)((()=>[(0,s._)("div",g,[(0,s.Wm)(c,{size:"12px",flat:"",dense:"",round:"",class:"text-red-9",icon:"remove_circle_outline",onClick:a=>Y("unblock",{email:t.email,id:t._id,type:t.type})},{default:(0,s.w5)((()=>[(0,s.Wm)(U,{class:"bg-red-9 text-white"},{default:(0,s.w5)((()=>[v])),_:1})])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024),(0,s.Wm)(R,{spaced:""})])))),128))])),_:1})])),_:1})]),(0,s.Wm)(G,{modelValue:Z.value,"onUpdate:modelValue":e[2]||(e[2]=t=>Z.value=t),persistent:""},{default:(0,s.w5)((()=>[(0,s.Wm)(F,{style:{"min-width":"250px"}},{default:(0,s.w5)((()=>[(0,s.Wm)(N,{class:"row items-center"},{default:(0,s.w5)((()=>[(0,s.Wm)(L,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{top:"",avatar:""},{default:(0,s.w5)((()=>[(0,s.Wm)(P,{icon:"report",color:"red","text-color":"white"})])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>["add"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:0},{default:(0,s.w5)((()=>[y])),_:1})):(0,s.kq)("",!0),"unblock"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:1},{default:(0,s.w5)((()=>[_])),_:1})):(0,s.kq)("",!0),"add"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:2,caption:"",lines:"3"},{default:(0,s.w5)((()=>[b])),_:1})):(0,s.kq)("",!0),"unblock"==Q.value?((0,s.wg)(),(0,s.j4)(B,{key:3,caption:"",lines:"3"},{default:(0,s.w5)((()=>[(0,s.Uk)(" You will start receiving emails "+(0,l.zw)("other_sender"==D.value.type?"from":"to")+" ",1),(0,s._)("span",W,(0,l.zw)(D.value.email),1),S])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1}),(0,s.Wm)(R,{spaced:"",inset:"item"})])),_:1}),"add"==Q.value?((0,s.wg)(),(0,s.j4)(N,{key:0,class:"q-pt-none q-mx-lg"},{default:(0,s.w5)((()=>[(0,s.Wm)(K,{dense:"",modelValue:$.value,"onUpdate:modelValue":e[1]||(e[1]=t=>$.value=t),autofocus:"",onKeyup:(0,u.D2)(I,["enter"])},null,8,["modelValue","onKeyup"])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(O,{align:"right"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{flat:"",label:"Cancel",color:"primary",onClick:E}),(0,s.Wm)(c,{flat:"",label:"add"==Q.value?"Block":"Unblock",color:"red",onClick:I},null,8,["label"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}}};var U=e(3414),x=e(2035),q=e(4554),C=e(2165),z=e(8870),Z=e(5314),Q=e(5869),$=e(7011),D=e(7704),A=e(2350),H=e(5096),j=e(6778),M=e(151),Y=e(5589),E=e(2426),I=e(9367),R=e(7518),B=e.n(R);const P=L,V=P;B()(L,"components",{QItem:U.Z,QItemSection:x.Z,QIcon:q.Z,QBtn:C.Z,QTooltip:z.Z,QSpinnerPie:Z.Z,QSeparator:Q.Z,QList:$.Z,QScrollArea:D.Z,QItemLabel:A.Z,QAvatar:H.Z,QDialog:j.Z,QCard:M.Z,QCardSection:Y.Z,QInput:E.Z,QCardActions:I.Z})}}]);